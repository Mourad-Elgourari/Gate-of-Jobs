<nav th:fragment="navbar" class="navbar navbar-expand-lg navbar-dark bg-primary">
    <!-- Removed the .container to make navbar full width -->
    <div class="w-100 px-3 d-flex justify-content-between align-items-center">

        <!-- Brand -->
        <a th:href="${#authorization.expression('hasRole(''ADMIN'')')} ? @{/dashboard} : @{/}"
           class="navbar-brand d-flex align-items-center">
            <img th:if="${company != null and company.logo != null}"
                 th:src="@{/company/profile/logo/{id}(id=${company.id})}"
                 alt="Company Logo" width="40" height="40" class="me-2 rounded">

            <img th:if="${company == null or company.logo == null}"
                 th:src="@{/img/logo.jpg}"
                 alt="Logo" width="40" height="40" class="me-2 rounded">
            <span class="fw-bold">G-Jobs</span>
        </a>

        <!-- Navbar links (left) -->
        <div class="navbar-nav flex-grow-1 ms-4">
            <a href="/dashboard" class="nav-link">Dashboard</a>

            <!--ADMIN -->
            <a th:if="${#authorization.expression('hasRole(''ADMIN'')')}"
               class="nav-link" href="/user">Users Manager</a>
            <!--ADMIN -->
            <a th:if="${#authorization.expression('hasRole(''CANDIDATE'')')}"
               class="nav-link" href="/candidate/new">Complete Profile</a>
            <!--ADMIN -->
            <a th:if="${#authorization.expression('hasRole(''COMPANY'')')}"
               class="nav-link" href="/company/profile/new">Complete Profile</a>
            <a th:if="${#authorization.expression('hasRole(''COMPANY'')')}"
               class="nav-link" href="/company/joboffers/add">Add Offer</a>
            <a th:if="${#authorization.expression('hasRole(''COMPANY'')')}"
               class="nav-link" href="/api/joboffers">Posted Offers</a>

        </div>

        <!-- Right side (auth actions) -->
        <div class="navbar-nav ms-auto">
            <!-- Guest -->
            <a th:if="${#authorization.expression('!isAuthenticated()')}"
               class="nav-link" href="/login">Sign in</a>
            <a th:if="${#authorization.expression('!isAuthenticated()')}"
               class="nav-link" href="/register">Sign up</a>

            <!-- Authenticated -->
            <form th:if="${#authorization.expression('isAuthenticated()')}"
                  th:action="@{/logout}" method="post" class="d-inline">
                <button type="submit" class="btn btn-danger ms-2">Logout</button>
            </form>
        </div>
    </div>
</nav>
