<nav th:fragment="navbar" class="navbar navbar-expand-lg navbar-dark bg-primary">
    <!-- Removed the .container to make navbar full width -->
    <div class="w-100 px-3 d-flex justify-content-between align-items-center">

        <!-- Candidate photo -->
        <img th:if="${candidate != null and candidate.photo != null}"
             th:src="@{'/candidate/profile/photo/' + ${candidate.id}}"
             alt="Candidate Photo"
             class="rounded-circle me-3 border"
             width="40" height="40">

        <!-- Company logo -->
        <img th:if="${company != null and company.logo != null}"
             th:src="@{'/company/profile/logo/' + ${company.id}}"
             alt="Company Logo"
             class="rounded-circle me-3 border"
             width="40" height="40">

        <!-- Navbar links (left) -->
        <div class="navbar-nav flex-grow-1 ms-4">
            <a href="/dashboard" class="nav-link">Dashboard</a>

            <!--ADMIN -->
            <a th:if="${#authorization.expression('hasRole(''ADMIN'')')}"
               class="nav-link" href="/user">Users Manager</a>
            <!--ADMIN -->
            <a th:if="${#authorization.expression('hasRole(''CANDIDATE'')')}"
               class="nav-link" href="/candidate/new">Complete Profile</a>
            <!--ADMIN -->
            <a th:if="${#authorization.expression('hasRole(''COMPANY'')')}"
               class="nav-link" href="/company/profile/new">Complete Profile</a>
            <a th:if="${#authorization.expression('hasRole(''COMPANY'')')}"
               class="nav-link" href="/company/joboffers/add">Add Offer</a>
            <a th:if="${#authorization.expression('hasRole(''COMPANY'')')}"
               class="nav-link" href="/api/joboffers">Posted Offers</a>

        </div>

        <!-- Right side (auth actions) -->
        <div class="navbar-nav ms-auto">
            <!-- Guest -->
            <a th:if="${#authorization.expression('!isAuthenticated()')}"
               class="nav-link" href="/login">Sign in</a>
            <a th:if="${#authorization.expression('!isAuthenticated()')}"
               class="nav-link" href="/register">Sign up</a>

            <!-- Authenticated -->
            <form th:if="${#authorization.expression('isAuthenticated()')}"
                  th:action="@{/logout}" method="post" class="d-inline">
                <button type="submit" class="btn btn-danger ms-2">Logout</button>
            </form>
        </div>
    </div>
</nav>
